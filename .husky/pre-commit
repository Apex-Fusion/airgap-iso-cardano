# TypeScript compilation check
echo "ğŸ” Checking TypeScript compilation..."
npm run typecheck

# ESLint check with auto-fix (allow warnings, only fail on critical errors)
echo "ğŸ§¹ Running ESLint with auto-fix (development mode)..."
npx eslint --fix src/**/*.ts || echo "âš ï¸ ESLint found issues but continuing..."

# Format with Prettier
echo "âœ¨ Formatting code with Prettier..."
npx prettier --write 'src/**/*.{ts,js}' '*.{md,json,yml,yaml}' || echo "âš ï¸ Prettier had issues but continuing..."

# Security audit (only fail on high/critical)
echo "ğŸ”’ Running security audit..."
npm audit --audit-level=high

# Run core tests (faster than full suite)
echo "ğŸ§ª Running core functionality tests..."
npm run test:core

echo "âœ… Pre-commit checks completed!"